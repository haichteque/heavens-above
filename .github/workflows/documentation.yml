# This workflow deploys a static folder to GitHub Pages without Jekyll

name: Deploy Simple Markdown Docs

on:
  # Run on pushes to main that change files in the 'docs/' folder
  push:
    branches: [ main ]
    paths:
      - 'docs/**'  # Trigger if anything in 'docs/' changes
      - '**.md'    # Also trigger if a root markdown file changes

  # Allow manual runs from the "Actions" tab
  workflow_dispatch:

# Grant permissions for the GITHUB_TOKEN to deploy to GitHub Pages
permissions:
  contents: read
  pages: write
  id-token: write

jobs:
  # This job just zips up your documentation folder
  build:
    name: Build Documentation
    runs-on: ubuntu-latest
    steps:
      - name: Checkout code
        uses: actions/checkout@v4

      - name: Setup Pages
        # This configures the environment for the artifact
        uses: actions/configure-pages@v4

      - name: Upload artifact
        # This zips up your 'docs' folder and makes it ready for deployment
        uses: actions/upload-pages-artifact@v3
        with:
          # This is the folder that will become your website's root
          # --- IMPORTANT ---
          # If your files are in the root, change this to '.'
          # If they are in another folder, change this to './folder-name'
          path: '.'

  # This job takes the zipped folder and deploys it
  deploy_doc:
    name: Deploy to GitHub Pages
    runs-on: ubuntu-latest
    
    # This job must wait for the 'build' job to finish
    needs: build

    # Configure the deployment environment
    environment:
      name: github-pages
      url: ${{ steps.deployment.outputs.page_url }}
      
    steps:
      - name: Deploy to GitHub Pages
        id: deployment
        # This action grabs the artifact from the 'build' job and deploys it
        uses: actions/deploy-pages@v4
